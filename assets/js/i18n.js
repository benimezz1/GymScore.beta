/* GymScore i18n (PT/EN) */
const I18N = {
  pt: {
    home_title: "Treino personalizado (sem IA) em 1 minuto",
    home_subtitle: "Responda algumas perguntas e receba um plano da semana baseado em regras e score.",
    home_start: "Começar",
    home_demo: "Ver exemplo",
    home_b1: "Sem login, sem custo, sem IA",
    home_b2: "Plano da semana + 5 semanas de progressão",
    home_b3: "Baixar PDF via impressão",
    home_how_title: "Como funciona",
    home_how_1: "Você preenche seus dados e preferências",
    home_how_2: "O sistema calcula um score e escolhe um plano",
    home_how_3: "Você recebe treino + aquecimento + progressão",
    home_note: "Observação: Isso não substitui um profissional de saúde/educação física.",

    form_title: "Seu perfil",
    form_subtitle: "Preencha para gerar o treino (sem IA) por regras e score.",

    generic_error: "Alguma informação está incorreta…",
    age_label: "Idade",
    age_hint: "Obrigatório (8–99)",
    height_label: "Altura (cm)",
    height_hint: "Opcional (se preencher: 100–230)",
    weight_label: "Peso (kg)",
    weight_hint: "Opcional (se preencher: 30–250)",

    sex_label: "Sexo",
    opt_optional: "Opcional",
    sex_male: "Masculino",
    sex_female: "Feminino",
    sex_other: "Outro / Prefiro não dizer",

    level_label: "Nível",
    opt_select: "Selecione",
    level_beg: "Iniciante",
    level_int: "Intermediário",
    level_adv: "Avançado",

    days_label: "Dias disponíveis (1–7)",
    days_hint: "Obrigatório • Se fora do intervalo, dá erro",

    duration_label: "Tempo do treino",
    duration_fast: "Rápido",
    duration_med: "Médio",
    duration_slow: "Lento",
    duration_vslow: "Muito lento",

    place_label: "Local",
    place_gym: "Academia",
    place_home: "Casa",

    goal_label: "Foco",
    goal_hypertrophy: "Hipertrofia",
    goal_fatloss: "Emagrecimento",
    goal_definition: "Definição",
    goal_strength: "Força",
    goal_conditioning: "Condicionamento",
    goal_calisthenics: "Calistenia",
    goal_health: "Saúde",
    goal_posture: "Postura",

    injuries_legend: "Lesões / pontos sensíveis (opcional)",
    inj_shoulder: "Ombro",
    inj_knee: "Joelho",
    inj_spine: "Coluna",
    inj_wrist_elbow: "Punho/Cotovelo",
    inj_hip_ankle: "Quadril/Tornozelo",

    next_btn: "Continuar",
    back_home: "Voltar",

    final_title: "Perguntas finais (beta)",
    final_note: "Cardio NÃO conta no tempo do treino. Você verá “X min treino” + “Y min cardio” separados.",
    cardio_label: "Cardio",
    cardio_none: "Nenhum",
    cardio_light: "Leve",
    cardio_mod: "Moderado",

    equip_title: "Equipamentos (se for treinar em casa)",
    equip_dumbbells: "Halteres",
    equip_bands: "Elástico",
    equip_pullup: "Barra fixa",
    equip_bench: "Banco",
    equip_kettlebell: "Kettlebell",
    equip_hint: "Opcional: marque o que você tem.",

    see_result_btn: "Ver resultado",
    back_btn: "Voltar",

    result_title: "Seu treino da semana",
    btn_pdf: "Baixar PDF",
    warmup_title: "Aquecimento (clique para abrir)",
    week_title: "Treino da semana",
    btn_5weeks: "Gerar 5 semanas",
    edit_btn: "Editar respostas",

    rest_legend_title: "Legenda de descanso",
    rest_legend_1: "Curto: 45–60s",
    rest_legend_2: "Médio: 60–90s",
    rest_legend_3: "Longo: 90–150s",

    warn_rest: "Você escolheu muitos dias. Considere ao menos 1 dia de descanso na semana.",
    warn_u18: "Idade menor que 18: plano mais conservador (técnica > carga).",
    meta_prefix: "Plano",
    meta_days: "dias",
    meta_place: "Local",
    meta_train: "Treino",
    meta_cardio: "Cardio",

    place_home_short: "Casa",
    place_gym_short: "Academia",

    cardio_min: "min",
    train_min: "min",

    // UI labels (not workout content)
    week_day: "Dia",
    week_week: "Semana",
    prog_note: "Progressão simples: +1 série em 1 exercício principal OU +2 reps mantendo boa forma."
  },

  en: {
    home_title: "Personal workout (no AI) in 1 minute",
    home_subtitle: "Answer a few questions and get a weekly plan based on rules and scoring.",
    home_start: "Start",
    home_demo: "See example",
    home_b1: "No login, no cost, no AI",
    home_b2: "Weekly plan + 5-week progression",
    home_b3: "Download PDF via print",
    home_how_title: "How it works",
    home_how_1: "You fill in your info and preferences",
    home_how_2: "The system scores and picks a plan",
    home_how_3: "You get workout + warm-up + progression",
    home_note: "Note: This does not replace a health/fitness professional.",

    form_title: "Your profile",
    form_subtitle: "Fill it out to generate your plan (no AI) using rules and scoring.",

    generic_error: "Some information is incorrect…",
    age_label: "Age",
    age_hint: "Required (8–99)",
    height_label: "Height (cm)",
    height_hint: "Optional (if filled: 100–230)",
    weight_label: "Weight (kg)",
    weight_hint: "Optional (if filled: 30–250)",

    sex_label: "Sex",
    opt_optional: "Optional",
    sex_male: "Male",
    sex_female: "Female",
    sex_other: "Other / Prefer not to say",

    level_label: "Level",
    opt_select: "Select",
    level_beg: "Beginner",
    level_int: "Intermediate",
    level_adv: "Advanced",

    days_label: "Available days (1–7)",
    days_hint: "Required • Out of range shows an error",

    duration_label: "Workout pace",
    duration_fast: "Fast",
    duration_med: "Medium",
    duration_slow: "Slow",
    duration_vslow: "Very slow",

    place_label: "Place",
    place_gym: "Gym",
    place_home: "Home",

    goal_label: "Goal",
    goal_hypertrophy: "Hypertrophy",
    goal_fatloss: "Fat loss",
    goal_definition: "Definition",
    goal_strength: "Strength",
    goal_conditioning: "Conditioning",
    goal_calisthenics: "Calisthenics",
    goal_health: "Health",
    goal_posture: "Posture",

    injuries_legend: "Injuries / sensitive areas (optional)",
    inj_shoulder: "Shoulder",
    inj_knee: "Knee",
    inj_spine: "Spine",
    inj_wrist_elbow: "Wrist/Elbow",
    inj_hip_ankle: "Hip/Ankle",

    next_btn: "Continue",
    back_home: "Back",

    final_title: "Final questions (beta)",
    final_note: "Cardio does NOT count in workout time. You'll see “X min workout” + “Y min cardio” separately.",
    cardio_label: "Cardio",
    cardio_none: "None",
    cardio_light: "Light",
    cardio_mod: "Moderate",

    equip_title: "Equipment (if training at home)",
    equip_dumbbells: "Dumbbells",
    equip_bands: "Bands",
    equip_pullup: "Pull-up bar",
    equip_bench: "Bench",
    equip_kettlebell: "Kettlebell",
    equip_hint: "Optional: check what you have.",

    see_result_btn: "See result",
    back_btn: "Back",

    result_title: "Your weekly workout",
    btn_pdf: "Download PDF",
    warmup_title: "Warm-up (click to expand)",
    week_title: "This week",
    btn_5weeks: "Generate 5 weeks",
    edit_btn: "Edit answers",

    rest_legend_title: "Rest legend",
    rest_legend_1: "Short: 45–60s",
    rest_legend_2: "Medium: 60–90s",
    rest_legend_3: "Long: 90–150s",

    warn_rest: "You picked many days. Consider at least 1 rest day per week.",
    warn_u18: "Under 18: more conservative plan (technique > load).",
    meta_prefix: "Plan",
    meta_days: "days",
    meta_place: "Place",
    meta_train: "Workout",
    meta_cardio: "Cardio",

    place_home_short: "Home",
    place_gym_short: "Gym",

    cardio_min: "min",
    train_min: "min",

    week_day: "Day",
    week_week: "Week",
    prog_note: "Simple progression: +1 set on 1 main exercise OR +2 reps with good form."
  }
};

function getLang() {
  const saved = localStorage.getItem("gymscore_lang");
  return saved === "en" ? "en" : "pt";
}

function setLang(lang) {
  const next = (lang === "en") ? "en" : "pt";
  localStorage.setItem("gymscore_lang", next);
  applyI18n();
  updateLangButtons(next);
}

function updateLangButtons(lang) {
  document.querySelectorAll(".lang-btn").forEach(btn => {
    const bLang = btn.getAttribute("data-lang");
    btn.classList.toggle("active", bLang === lang);
  });
}

function applyI18n() {
  const lang = getLang();
  const dict = I18N[lang] || I18N.pt;

  document.documentElement.lang = (lang === "en") ? "en" : "pt-br";

  document.querySelectorAll("[data-i18n]").forEach(el => {
    const key = el.getAttribute("data-i18n");
    if (!key) return;
    const val = dict[key];
    if (typeof val === "string") el.textContent = val;
  });
}

function initI18n() {
  const lang = getLang();
  updateLangButtons(lang);

  document.querySelectorAll(".lang-btn").forEach(btn => {
    btn.addEventListener("click", () => {
      const bLang = btn.getAttribute("data-lang");
      setLang(bLang);
    });
  });
}
